# ‚úÖ Setup Complete - .base AI Platform

## üéâ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–î–∞—Ç–∞:** 24 –Ω–æ—è–±—Ä—è 2025  
**–í—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** ~30 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## üìä –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:

### ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- ‚úÖ **Next.js 14** - –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:3001
- ‚úÖ **Supabase** - –ø–æ–¥–∫–ª—é—á–µ–Ω (`apuhcgdpgolrmdlnerxh.supabase.co`)
- ‚úÖ **PostgreSQL –ë–î** - 3 —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ **Storage Bucket** - `generations` (public)
- ‚úÖ **Row Level Security** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)

**–¢–∞–±–ª–∏—Ü—ã:**
1. ‚úÖ `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (1 —Ç–µ—Å—Ç–æ–≤—ã–π —Å–æ–∑–¥–∞–Ω)
2. ‚úÖ `generations` - –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (17 –∑–∞–ø–∏—Å–µ–π)
3. ‚úÖ `replicate_tokens` - –ø—É–ª —Ç–æ–∫–µ–Ω–æ–≤ (10 —Ç–æ–∫–µ–Ω–æ–≤)

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ `get_next_replicate_token()` - –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ `update_generation_status()` - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ timestamps

### ‚úÖ AI –ú–æ–¥–µ–ª–∏ (19 —à—Ç—É–∫)

**–°–æ–∑–¥–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (8):**
- SDXL Lightning, FLUX Schnell, Stable Diffusion
- Nano Banana, SeeDream 4, Recraft V3
- Imagen 4, Ideogram V3 Turbo

**–£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ (3):**
- Real-ESRGAN, Clarity Upscaler, Recraft Crisp

**–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (5):**
- Nano Banana, SeeDream 4, FLUX Kontext Pro
- Multi-Image Kontext, FLUX Fill Pro

**–£–¥–∞–ª–∏—Ç—å —Ñ–æ–Ω (3):**
- Background Remover, BiRefNet, BRIA

### ‚úÖ Replicate API

- ‚úÖ **10 —Ç–æ–∫–µ–Ω–æ–≤** –≤ –ø—É–ª–µ
- ‚úÖ **Token Pool Manager** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Round-robin –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** –∞–∫—Ç–∏–≤–Ω–∞
- ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** —É—Å–ø–µ—à–Ω—ã

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ **UI pixel-perfect** –ø–æ –¥–∏–∑–∞–π–Ω—É Figma
- ‚úÖ **API endpoints** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Real-time —Å—Ç–∞—Ç—É—Å** - –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

---

## üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:

### –£—Å–ø–µ—à–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è #1:**
- Model: FLUX Schnell
- Prompt: "A beautiful sunset over mountains"
- Status: ‚úÖ completed
- Output: https://replicate.delivery/czjl/l7BZafW4wmWEWip4Snz7JkO0S6aJDN1bftxhHCZ55V9VzisVA/out-0.webp
- Token used: #9

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è #2:**
- Model: FLUX Schnell  
- Prompt: "Test prompt"
- Status: ‚úÖ completed
- Output: https://replicate.delivery/czjl/9FXRDmewuGReoUKnxiN8eQrbtvam15KiY6Twfn1F7eUkaXktC/out-0.webp
- Token used: #2

**–í—Å–µ–≥–æ –≤ –ë–î:** 17 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

---

## üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:

### **http://localhost:3001**

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

### Environment Variables (.env.local)

```env
‚úÖ NEXT_PUBLIC_SUPABASE_URL=https://apuhcgdpgolrmdlnerxh.supabase.co
‚úÖ NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
‚úÖ SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...
‚úÖ REPLICATE_API_TOKENS=10 —Ç–æ–∫–µ–Ω–æ–≤
```

### Supabase Storage

- ‚úÖ Bucket: `generations` (public)
- ‚úÖ Policies: Read - public, Upload - authenticated

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

‚ö†Ô∏è **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- –í—Å–µ API —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ auth
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –î–ª—è production –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ

---

## üöÄ –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í—ã–±—Ä–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
- –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å (19 –Ω–∞ –≤—ã–±–æ—Ä)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –°–æ–∑–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### 2. –ò—Å—Ç–æ—Ä–∏—è
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–∏–ø—É
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –£–¥–∞–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Token Pool:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Supabase SQL Editor
SELECT 
  id,
  is_active,
  request_count,
  last_used_at
FROM replicate_tokens
ORDER BY request_count DESC;
```

**–¢–æ–∫–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:**
- Token #9 - 1+ –∑–∞–ø—Ä–æ—Å
- Token #2 - 1+ –∑–∞–ø—Ä–æ—Å
- –û—Å—Ç–∞–ª—å–Ω—ã–µ 8 —Ç–æ–∫–µ–Ω–æ–≤ - –æ–∂–∏–¥–∞—é—Ç

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

### Warnings (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
- Webpack cache warnings - –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ
- Port 3000 –∑–∞–Ω—è—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 3001 ‚úÖ

### TODO –¥–ª—è production:
- [ ] –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram –±–æ—Ç
- [ ] –î–æ–±–∞–≤–∏—Ç—å HTTPS –¥–ª—è webhook
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–°–ï–ô–ß–ê–°):
1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3001
2. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
3. ‚úÖ –ü—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏
4. ‚úÖ –°–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é

### –î–ª—è production (–ü–û–¢–û–ú):
1. –°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞
2. –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
3. –î–µ–ø–ª–æ–π –Ω–∞ Vercel
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook (HTTPS)

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

**–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
```bash
lsof -ti:3001 | xargs kill -9
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
```bash
cd /Users/andrewaitken/dot-base && npm run dev
```

**–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à:**
```bash
rm -rf .next
```

---

## ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

**–°–µ—Ä–≤–µ—Ä:** http://localhost:3001  
**–°—Ç–∞—Ç—É—Å:** üü¢ Online  
**API:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–ë–î:** ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞  
**–ú–æ–¥–µ–ª–∏:** ‚úÖ 19 –¥–æ—Å—Ç—É–ø–Ω—ã

---

**–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å!** üé®üöÄ


